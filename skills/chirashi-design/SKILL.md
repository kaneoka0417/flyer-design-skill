---
name: flyer-design
description: 日本語チラシのデザイン・作成・PDF出力スキル。デザイン哲学の策定→構成案→HTML/CSS実装→PDF出力の一貫ワークフロー。チラシ、フライヤー、ビラ、販促物の作成時に使用。レイアウト、配色、タイポグラフィ、視線誘導、印刷設定（350dpi/CMYK/塗り足し）のノウハウを提供。
---

# 日本語チラシデザインスキル

チラシをデザインし、印刷用PDFを生成するためのガイド。

## 絶対ルール（非交渉）

1. **絵文字禁止** -- テンプレート・成果物に絵文字を一切使わない。全てインラインSVGアイコンで置換する（参照: `references/icons-images.md`）
2. **カードUI禁止** -- `border-radius` + `border` + `box-shadow` の組み合わせは使わない。色面（背景色の切り替え）でゾーンを分ける
3. **数字は突出表示** -- 価格・人数・期間などの数字は周囲テキストの2-4倍のフォントサイズにする。Inter fontで欧文差別化
4. **3つ以上同じ見た目のブロック禁止** -- 各セクションの見た目を変える。同一CSSクラスの反復不可
5. **統一感は区切り線で保つ** -- 1ブロックだけ完全に違う背景色にしない。薄い区切り線（0.3mm solid）で分離しつつ統一感を維持
6. **視覚バランス必須** -- flexbox の align-items/justify-content で上下左右の中央揃えを徹底。偏りのない均等な余白
7. **最高画質出力** -- PDF生成は必ず高画質設定（deviceScaleFactor:2, /prepress, 600dpi, ダウンサンプル無効）

## ワークフロー

### Step 0: 要件ヒアリング（徹底）

以下の項目を**全て確認するまで**デザインに進まない。不足があれば追加質問を続ける。

**必須確認項目:**

| 項目 | 質問例 |
| --- | --- |
| **目的** | 何を伝えたいか（イベント告知、セール、採用、新商品等） |
| **ターゲット** | 誰に届けるか（年齢層、役職、地域等） |
| **サイズ** | A4/A5/B5など（デフォルト: A4縦） |
| **片面 or 両面** | ペライチ1面か、表裏2面か |
| **テーマ** | ダーク or ライト（ブランドイメージに合わせて提案） |
| **掲載情報** | タイトル、日時、場所、価格、連絡先、QRコード等 |
| **ブランドカラー/ロゴ** | 既存のブランドカラーやロゴデータの有無 |
| **写真の有無** | 使用したい写真があるか。なければフリー素材か仮画像か |
| **印刷方法** | オフィスプリンタ or 商業印刷（塗り足し要否に影響） |

### Step 0.5: パターン選択

要件に基づいて、テンプレートパターンを選択する。

| 条件 | テンプレート |
| --- | --- |
| ダーク + 片面 | `assets/templates/pattern-dark-single.html` |
| ライト + 片面 | `assets/templates/pattern-light-single.html` |
| ダーク + 両面（表） | `assets/templates/pattern-dark-double-front.html` |
| ダーク + 両面（裏） | `assets/templates/pattern-dark-double-back.html` |
| ライト + 両面（表） | `assets/templates/pattern-light-double-front.html` |
| ライト + 両面（裏） | `assets/templates/pattern-light-double-back.html` |

選択したテンプレートを読み込み、CSS変数でブランドカラーに調整する。

### Step 1: デザイン哲学の策定

レイアウトに入る前に、チラシ全体の美的方向性を言語化する。

**策定内容:**

- **ムーブメント名**（1-2語）: デザインの核心を表現する造語（例: "Civic Innovation", "Brutalist Joy"）
- **ビジュアルトーン**: 写真主体 / グラフィック主体 / テキスト主体
- **配色方針**: 3色の法則に基づく具体的な色と感情的意図
- **タイポグラフィ方針**: フォントの組み合わせとその理由
- **空間の使い方**: 密度感の方針（チラシは高密度が基本だが、用途に応じて調整）

**品質基準（非交渉）:**

- 職人的な仕上がり -- すべての要素配置に明確な意図があること
- 行き当たりばったりの装飾禁止 -- 哲学に基づかない要素は追加しない
- 視覚的階層の完全性 -- 3秒で最重要情報が伝わること

**出力**: `output/[project]/design-philosophy.md` として保存

### Step 2: 構成案の作成

デザイン哲学をもとに、実装前の構成案を作成する。

**構成案に含める内容:**

- キャッチコピー・サブコピー（複数案）
- 表面/裏面のレイアウト構成（各ゾーンの役割と配置）
- **ゾーン配分%の明記**（例: Hero 35%, Features 15%, Content 30%, CTA 15%）
- 各セクションの文言
- **数字強調サイズの明記**（例: 価格 32pt, 比率 28pt, 期間 22pt）
- 画像・ビジュアル素材の要件リスト（シチュエーション、推奨サイズ、撮影指示）
- 使用するSVGアイコンのリスト

**出力**: `output/[project]/composition-proposal.md` として保存

### Step 3: 写真・素材の確定

構成案の完成後、実装に入る前に使用する写真・素材を確定する。

#### 3.1 ユーザーへの素材ヒアリング（必須）

構成案の画像要件リストをもとに、ユーザーへ以下を確認する:

- **手持ち素材の有無**: 「構成案で◯箇所に写真を使用します。使用したい写真の候補はありますか？」
- **提供方法の案内**: ファイルパス指定、フォルダごと共有、画像の直接貼り付け等
- **素材がない場合の方針**: フリー素材を使うか、撮影するか、仮画像で進めるか

**ユーザーに確認せず、勝手にフリー素材やプレースホルダーで進めない。**

#### 3.2 写真候補の評価・選定

ユーザーから候補を受け取ったら、以下の観点で S/A/B/C の4段階評価を行う:

| 評価観点 | 内容 |
| --- | --- |
| **解像度** | 印刷に耐えるか（350dpi相当以上 -> S/A、低解像度 -> C） |
| **構図・被写体** | 該当セクションの役割に合った内容か |
| **明るさ・色調** | デザイン哲学の配色方針と調和するか |
| **トリミング耐性** | `object-fit: cover` で切り抜いたとき、重要な被写体が残るか |

#### 3.3 配置マッピングと不足素材の対応

- 各候補を構成案のどのセクションに配置するか提案する
- 構成案の要件に対して候補が足りない場合、**具体的なシチュエーション・撮影指示**を提示する
- フリー素材で補う場合は `references/icons-images.md` の推奨サイトから選定する

**出力**: 選定結果を `output/[project]/composition-proposal.md` の画像要件リストに反映

### Step 4: HTML/CSSでデザイン

**実装前に必ず `references/chirashi-design-system.md` を読むこと。**
これがチラシデザインの核心ルール集であり、LP化を防ぐための指針。

**実装手順:**

1. Step 0.5で選択したパターンテンプレートを `output/[project]/` にコピー
2. CSS変数（`--accent`, `--bg-*`, `--text-*`）をブランドカラーに調整
3. プレースホルダー（`[PLACEHOLDER]`）を実際のコンテンツに置換
4. 写真パス、QRコードパス、ロゴパスを設定
5. 絶対ルール7項目を遵守

**CSS必須設定:**

```css
body {
  width: 210mm;
  height: 297mm;
  overflow: hidden; /* 絶対にはみ出さない */
}
```

### Step 5: レイアウト検証（1ページ収まり保証）

HTML実装後、PDF生成前に以下を必ず確認する。

#### 5.1 スペース予算の事前計算（必須）

1. **有効エリアの算出**: ページ総高さ（例: A4=297mm）から、固定要素を引く
2. **コンテナpadding確保**: absolute要素と重なるエリアには、コンテナ側で同等以上のpaddingを設定
3. **各セクション高さの積み上げ**: フォントサイズ(pt->mm換算: 1pt=0.35mm) x 行数 x line-height + padding + margin を各セクションごとに概算

#### 5.2 コンテンツ量の調整

- 収まらない場合の対処優先順位:
  1. **ユーザーに削除可能なコンテンツを確認する**（最優先）
  2. 両面構成の場合、面の役割分担を見直して情報を移動する
  3. セクション間マージンやpadding を均等に縮小する（最大30%まで）
- **やってはいけないこと**: フォントを6pt以下に縮小する / マージンを0.1mm単位で削り倒す / ユーザーに確認せず勝手にコンテンツを削除する

#### 5.3 写真・画像の表示品質

- 写真の高さは**最低20mm**を確保する（それ以下は印刷時に潰れて判別困難）
- メインビジュアル（ヒーロー写真）は**60mm以上**を推奨
- `object-fit: cover` で比率を維持し、`object-position` で被写体の中心を調整

#### 5.4 チェックリスト

- [ ] 1ページに収まっているか（2ページ目が生成されていないか）
- [ ] 絵文字が使われていないか（全てSVGアイコンか）
- [ ] `border-radius` + `border` + `box-shadow` のカードUIがないか
- [ ] 同じカードデザインが3つ以上並んでいないか
- [ ] 数字（価格・人数・期間）が周囲テキストの2倍以上か
- [ ] 上下/左右の中央揃えが適切か（偏りがないか）
- [ ] 背景が全面1色になっていないか（色面は3つ以上あるか）
- [ ] 紙面全体を見て「1枚の絵」として成立しているか

### Step 6: PDF生成（高画質）

```bash
# 推奨: Puppeteer + Ghostscript（印刷互換性最高 + 高画質）
node scripts/html_to_pdf.js flyer.html flyer.pdf

# サイズ指定
node scripts/html_to_pdf.js flyer.html flyer.pdf --size A4-bleed
```

**高画質設定（html_to_pdf.js に設定済み）:**

- Puppeteer: `deviceScaleFactor: 2`（2倍解像度レンダリング）
- Ghostscript: `-dPDFSETTINGS=/prepress`（最高品質プリセット）
- 画像解像度: 600dpi（カラー/グレー）、1200dpi（モノクロ）
- ダウンサンプル: 無効（画像を縮小しない）

**対応サイズ**: A4, A5, B5, A4-bleed, A5-bleed

`--no-gs` は使わない。Ghostscript後処理（フォントアウトライン化、透過フラットニング）は必須。

## 印刷互換性

### 方針: デザインに制約をかけない

グラデーション、透過、影など**自由に使ってOK**。
Ghostscript後処理で印刷互換性を確保する。

### Ghostscript後処理（必須）

- Type3フォント -> アウトライン化
- 透過レイヤー -> PDF 1.3でフラットニング
- 複雑なShading -> 単純化

詳細は `references/print-compatibility.md` 参照

### 必要なツール

```bash
npm install puppeteer        # Chromium自動ダウンロード
brew install ghostscript     # macOS (PDF後処理・必須)
# or: sudo apt install ghostscript  # Linux
```

## 印刷用設定

- **解像度**: 350dpi
- **カラーモード**: CMYK（RGB->CMYK変換は印刷所で対応可）
- **塗り足し**: フチなし印刷時は仕上がりサイズ+3mm
- **フォント**: 埋め込み必須（Ghostscriptでアウトライン化）

## 参照ファイル

- `references/chirashi-design-system.md` - **CORE: チラシデザインの全ルール（必読）**
- `references/design-principles.md` - デザイン原則（グリッド、視線誘導、CTA）
- `references/color-guide.md` - 配色・日本の季節感・業種別カラー
- `references/typography.md` - 日本語タイポグラフィ・Inter font
- `references/icons-images.md` - **SVGアイコン集（絵文字禁止）**・イラスト・画像ソース
- `references/print-compatibility.md` - 印刷互換性・Ghostscript設定
- `assets/templates/` - パターンテンプレート（条件別に選択）
- `scripts/html_to_pdf.js` - PDF生成スクリプト（高画質設定済み）
